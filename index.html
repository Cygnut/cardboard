<!DOCTYPE html>
<html>
<head>
	<!--
		shortcut icon
			
			Fixed height for decks ui. Scrollable.
			Card table ui.
			Hide/Show cards.
			
			Filter by deck/decks.
			
			Scrollable deck pane when too big.
			
			Issue where add context menu  then don't left click leads it to still show an add context if click on a card (i.e. different z-index)
				maybe just have a button to add a card instead!
			
			Show all decks.
			
			Filter by decks.
			Search by card name.
			'Draw x random cards from this deck'
			
			Add card at position clicked.
			
			Style cards.
			
			Allow import/export.
			
			Style top bar for adding, etc
			Tidy up all header elements!
			
			Only show ui panel for:
				adding, editing and deleting cards WHEN edit mode on.
			
			Use http://www.bootstraptoggle.com/ ?
	-->
	
	<title>cardboard</title>
	
	<meta charset="UTF-8">
	<meta name="description" content="Card game prototyping web app.">
	<meta name="keywords" content="Cards, Games, Prototyping">
	<meta name="author" content="Cygnut">
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!--
	<link rel="shortcut icon" href="img/content/roteIcon-64x64-Transparent.png" />
	-->
	<!--
	<link href="vendor/jquery-ui-1.12.1/jquery-ui.css" rel="stylesheet">
	-->
	
		<!-- Angular & linked Bootstrap libs -->
	<script src="vendor/underscore-1.8.3.js"></script>
	<script src="vendor/jquery-3.1.1.min.js"></script>
	<script src="vendor/jquery-ui-1.12.1/jquery-ui.js"></script>
	<script src="vendor/jquery-contextmenu-2.4.2/jquery.contextMenu.js"></script>
	<script src="vendor/angular.min-1.5.7.js"></script>
	<script src="vendor/ui-bootstrap-tpls-2.4.0.js"></script>
	<script src="vendor/bootstrap-3.3.7/js/bootstrap.js"/></script>
	<script src="vendor/angular-local-storage-0.5.0.js"></script>
	
	<!-- Angular model -->
	<script src="scripts/app.js"></script>
	<script src="scripts/services/cardboardService.js"></script>
	<script src="scripts/services/modalService.js"></script>
	<script src="scripts/directives/draggable.js"></script>
	<script src="scripts/directives/contextMenu.js"></script>
	<script src="scripts/controllers/cards-board.js"></script>
	<script src="scripts/controllers/cards.js"></script>
	<script src="scripts/controllers/decks.js"></script>
	
	<link rel="stylesheet" href="vendor/jquery-contextmenu-2.4.2/jquery.contextMenu.css"/>
	<link rel="stylesheet" href="vendor/font-awesome-4.7.0/css/font-awesome.css"/>
	<link rel="stylesheet" href="vendor/bootstrap-3.3.7/css/bootstrap.css"/>
	
<script>

</script>
<style>

header {
	text-align: center;
}

/* Fill entire viewport */

html, body { 
	width: 100%; 
	height: 100%; 
	margin: 0; 
}

.board-container {
	background-color: black;
	width: 100%;
	height: 100%;
}

#board {
	width: 98%;
	height: 98%;
	
	position: relative;
	left: 1%; top: 1%;
	overflow: auto;
	
	background-image: url("img/layout/cartoon-wood-background.png");
	background-repeat: repeat;
	
	border-radius: 5%;
	box-shadow: 0px 0px 10px 10px black inset;
}

.card {
	/* Permanent - not user configurable. */
	position: absolute;
	background-color: white;
	border: solid;
	border-radius: 10%;
	
	text-align: center
	
	/* Configurable by user. */
	width: 100px;
	height: 100px;
}

nav.navbar {
	border-top-left-radius: 0;
	border-top-right-radius: 0;
	
	position: fixed;
	width: 100%;
	z-index: 1000;	/* Ensure on a layer above cards on the board. */
	opacity: 0.85;
}

.context-menu-root {
	z-index: 2000;	/* Ensure not overlapped by cards. */
}

.modal-dialog {
	z-index: 2000;	/* Ensure on a layer above cards & the nav. */
}

.modal-body label, .modal-body input, .modal-body select, .modal-body textarea{
	display: block;
	margin-top: 7px;
	margin-bottom: 7px;
}

.modal-body .panel {
	margin-bottom: 5px;
}

.editable-tr {
	cursor: pointer;
}

.tab-pane button {
	margin: 5px 0 5px 0;
	/*float: right;*/
}

.table-tab {
	max-height: 200px;
	overflow: auto;
}

</style>
</head>
<body ng-app="cardboard">

<nav class="navbar navbar-default">
	<div class="container-fluid">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-section">
				<span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
			</button>
		</div>
		
		<div class="navbar-collapse collapse" id="navbar-collapse-section">
			
			<div>
				<ul class="nav nav-tabs">
					<li class="active"><a data-toggle="tab" href="#home">Home</a></li>
					<li><a data-toggle="tab" href="#cards">Cards</a></li>
					<li><a data-toggle="tab" href="#decks">Decks</a></li>
				</ul>
			</div>
			
			<div class="tab-content">
				
				<div id="home"></div>
				
				<div ng-controller="cards" class="table-tab tab-pane fade in" id="cards">
					<button class="btn btn-primary" ng-click="hideAll(true);">Hide All</button>
					<button class="btn btn-primary" ng-click="hideAll(false);">Show All</button>
					<table class="table">
						<tr>
							<th>Title</th>
							<th>Hidden?</th>
						</tr>
						<tr ng-repeat="c in cards">
							<td>{{ c.title }}</td>
							<td>
								<input type="checkbox" ng-model="c.hidden" ng-change="onHideChange(c);"></input>
							</td>
						</tr>
					</table>
				</div>
				
				<div ng-controller="decks" class="table-tab tab-pane fade in" id="decks">
					<button class="btn btn-primary" ng-click="addDeck();">Add New Deck</button>
					<table class="table">
						<tr>
							<th>Name</th>
							<th>Description</th>
						</tr>
						<tr ng-repeat="d in decks" ng-click="editDeck(d);" class="editable-tr">
							<td>{{ d.name }}</td>
							<td>{{ d.description }}</td>
						</tr>
					</table>
				</div>
				
			</div>
		</div>
	</div>
</nav>

<div ng-controller="cards-board" class="container-fluid board-container">
	
	<context-menu
		selector="#board"
		items='{
			"add": { "name": "Add", "icon": "fa-plus" }
		}'
		on-context-click="onContextClick(option, id)"
		/>
	
	<context-menu
		selector=".card"
		items='{
			"hide": { "name": "Hide", "icon": "fa-eye-slash" },
			"edit": { "name": "Edit", "icon": "fa-edit" },
			"delete": { "name": "Delete", "icon": "fa-remove" }
		}'
		on-context-click="onContextClick(option, id)"
		/>
	
	<div id="board">
		<div 
			ng-attr-id="{{ 'card-' + c.id }}" 
			ng-attr-card-id="{{ c.id }}" 
			draggable="true" 
			on-move-stop="onMoveStop(attrs, left, top)" 
			class="card" 
			ng-repeat="c in cards"
			ng-style="{
				left: c.left,
				top: c.top
			}"
			ng-class="{
				'selected': c.id === selectedCardId
			}"
			ng-click="cardClick(c);"
			>
			<h1>{{ c.title }}</h1>
			<hr/>
			<p>{{ c.content }}</p>
		</div>
	</div>
</div>

</body>
</html>
